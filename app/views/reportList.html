#{extends 'main.html' /}
%{  def action = "$request.action";
def prev_url = actionBridge."$action".call(prevPage);
def next_url = actionBridge."$action".call(nextPage);
}%
<section>
    <header></header>
    <a href="@{MenuController.reportMenu(1)}" class="boton_top">â—„ &{ 'application.back' }</a>
    <article>
        <div class="contenido_grande">
            <div style="text-align: center;">
                #{form @list(), 'id': 'mainForm', 'method' : 'GET' }
                <ul>
                    <li  style="display: inline;">Fecha desde: <input class="datepicker" type="datetime" name="startDate" value="${startDate?.format('dd/MM/yyyy')}" /></li>
                    <li  style="display: inline;">Fecha hasta: <input class="datepicker" type="datetime" name="endDate" value="${endDate?.format('dd/MM/yyyy')}" /></li>
                </ul>
                <input type="hidden" name="page" value="${page}">
                <input type="hidden" name="id">
                #{/form}
            </div>
            #{doLayout /}
        </div>
        <hr>
        <div class="botonera" style="height: 550px;">
            <ul class="on-4 columns">
                <li class="column">
                    <div class="columna">
                        <a href="#" id="first" class="boton ${play.configuration['style.button_color']} full_width separar">first</a>
                    </div>
                </li>
                <li class="column">
                    <div class="columna">
                        <a href="#" id="prev" class="boton ${play.configuration['style.button_color']} full_width separar">prev page</a>
                    </div>
                </li>
                <li class="column">
                    <div class="columna">
                        <a href="#" id="next" class="boton ${play.configuration['style.button_color']} full_width separar">next page</a>
                    </div>
                </li>
                <li class="column">
                    <div class="columna">
                        <a href="#" id="last" class="boton ${play.configuration['style.button_color']} full_width separar">end</a>
                    </div>
                </li>
            </ul>
        </div>
    </article>
</section>
#{set 'moreScripts'}
<script type="text/javascript" charset="${_response_encoding}">
    $(function() {
        $( ".datepicker" ).datepicker({
            dateFormat : "dd/mm/yy",
            onSelect: function(date) {
                $( "#mainForm" ).submit();
            }
        });
        $( "#first" ).click(function( event ) {
            $( "[name = page]" ).val( 1 );
            $( "#mainForm" ).submit();
            event.preventDefault();
        });
        $( "#prev" ).click(function( event ) {
            $( "[name = page]" ).val( parseInt( $( "[name = page]" ).val() ) - 1 );
            $( "#mainForm" ).submit();
            event.preventDefault();
        });
        $( "#next" ).click(function( event ) {
            $( "[name = page]" ).val( parseInt( $( "[name = page]" ).val() ) + 1 );
            $( "#mainForm" ).submit();
            event.preventDefault();
        });
        $( "#last" ).click(function( event ) {
            $( "[name = page]" ).val( ${totalPage} );
            $( "#mainForm" ).submit();
            event.preventDefault();
        });
        $( ".submitForm" ).click(function( event ) {
            $( "[name = id]" ).val( $(this).attr( "id" ) );
            $( "#mainForm" ).attr("action", $(this).attr("href") ).submit();
            event.preventDefault();
        });
    });
</script>
#{/set}



