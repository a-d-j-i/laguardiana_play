#{extends 'ReportController/lists.html' /}
#{set title: 'List Deposits' /}
<div style="fo">
    <table style="margin-left: auto; margin-right: auto; border: 1px solid;">
        <thead>
        <th>Transaccion</th>
        <th>Usuario</th>
        <th>Fecha del deposito</th>
        <th>Cierre contable</th>
        <th>Total</th>
        <th colspan="2">Acciones</th>
        </thead>
        <tbody>
            #{list items:data, as:'deposit' }
            #{if ( ! deposit.finishDate ) } 
            <tr style="background-color: lightpink;">
                #{/if}
                #{else}
            <tr style="background-color: lightgreen;">
                #{/else}
                <td>${deposit.depositId} </td>
                <td>${deposit.user.username} &nbsp; ${deposit.user.gecos}</td>
                <td>${deposit.creationDate?.format('dd/MM/yyyy hh:mm:ss')}</td>
                <td style="width:180px;">
                    ${deposit.z.creationDate?.format('dd/MM/yyyy hh:mm:ss')}
                    <br>
                    ${deposit.z.closeDate?.format('dd/MM/yyyy hh:mm:ss')}
                </td>
                <td style="width:150px;">
                    #{if ( deposit.class.getSimpleName() == "BillDeposit" )}
                    ${deposit.getTotal()}
                    #{/if}
                    #{if ( deposit.class.getSimpleName() == "EnvelopeDeposit" )}
                    Deposito por sobre
                    #{/if}
                </td>
                <td style="background-color: lightblue; border: 1px solid;">
                    <a href="@">Detalle</a>
                </td>
                <td style="background-color: lightblue; border: 1px solid;">
                    <a href="@">Reimprimir Ticket</a>
                </td>
            </tr>
            #{/list}
        </tbody>
        <tfoot> 
            <tr><td colspan="5">Pagina ${page}</td></tr>
        </tfoot>
    </table>
</div>